.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/ip/directiplookup.hh:7'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "DIRECTIPLOOKUP" 7click "12/Oct/2017" "Click"
.SH "NAME"
DirectIPLookup \- Click element;
IP routing lookup using direct-indexed tables
.SH "SYNOPSIS"
\fBDirectIPLookup\fR(ADDR1/MASK1 [GW1] OUT1, ADDR2/MASK2 [GW2] OUT2, ...)

\fBPorts\fR: 1 input, any number of outputs
.br
\fBProcessing\fR: push
.br
\fBDrivers\fR: userlevel, bsdmodule
.br
.SH "DESCRIPTION"
Expects a destination IP address annotation with each packet. Looks up that
address in its routing table, using longest-prefix-match, sets the destination
annotation to the corresponding GW (if specified), and emits the packet on the
indicated OUTput port.
.PP
Each argument is a route, specifying a destination and mask, an optional
gateway IP address, and an output port.  No destination-mask pair should occur
more than once.
.PP
\fBDirectIPLookup\fR is optimized for lookup speed at the expense of extensive RAM
usage. Each longest-prefix lookup is accomplished in one to maximum two DRAM
accesses, regardless on the number of routing table entries. Individual
entries can be dynamically added to or removed from the routing table with
relatively low CPU overhead, allowing for high update rates.
.PP
\fBDirectIPLookup\fR implements the \fIDIR-24-8-BASIC\fR lookup scheme described by
Gupta, Lin, and McKeown in the paper cited below.
.PP

.SH "ELEMENT HANDLERS"



.IP "\fBtable\fR (read-only)" 5
Outputs a human-readable version of the current routing table.
.IP "" 5
.IP "\fBlookup read-only, requires\fR (parameters)" 5
Reports the OUTput port and GW corresponding to an address.
.IP "" 5
.IP "\fBadd\fR (write-only)" 5
Adds a route to the table. Format should be `\f(CWADDR/MASK [GW] OUT\fR'.
Fails if a route for \f(CWADDR/MASK\fR already exists.
.IP "" 5
.IP "\fBset\fR (write-only)" 5
Sets a route, whether or not a route for the same prefix already exists.
.IP "" 5
.IP "\fBremove\fR (write-only)" 5
Removes a route from the table. Format should be `\f(CWADDR/MASK\fR'.
.IP "" 5
.IP "\fBctrl\fR (write-only)" 5
Adds or removes a group of routes. Write `\f(CWadd\fR/\f(CWset ADDR/MASK [GW] OUT\fR' to
add a route, and `\f(CWremove ADDR/MASK\fR' to remove a route. You can supply
multiple commands, one per line; all commands are executed as one atomic
operation.
.IP "" 5
.IP "\fBflush\fR (write-only)" 5
Clears the entire routing table in a single atomic operation.
.IP "" 5
.PP

.SH "NOTES"
See 
.M IPRouteTable 7
for a performance comparison of the various IP routing
elements.
.PP
\fBDirectIPLookup\fR's data structures are inherently limited: at most 2^16 /24
networks can contain routes for /25-or-smaller subnetworks, no matter how much
memory you have.  If you need more than this, try 
.M RangeIPLookup 7 .
.PP

.SH "SEE ALSO"
.M IPRouteTable 7 ,
.M RangeIPLookup 7 ,
.M RadixIPLookup 7 ,
.M StaticIPLookup 7 ,
.M LinearIPLookup 7 ,
.M SortedIPLookup 7 ,
.M LinuxIPLookup 7
.PP
Pankaj Gupta, Steven Lin, and Nick McKeown.  "Routing Lookups in Hardware at
Memory Access Speeds".  In Proc. IEEE Infocom 1998, Vol. 3, pp. 1240-1247.


.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/analysis/fromnlanrdump.hh:11'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "FROMNLANRDUMP" 7click "12/Oct/2017" "Click"
.SH "NAME"
FromNLANRDump \- Click element;
reads packets from an NLANR file
.SH "SYNOPSIS"
\fBFromNLANRDump\fR(FILENAME [, \fIKEYWORDS\fR])

\fBPorts\fR: no inputs, 1-2 outputs
.br
\fBProcessing\fR: agnostic, but output 1 is push
.br
\fBDrivers\fR: userlevel
.br
.SH "DESCRIPTION"
Reads IP packets from a file in a format used for NLANR traces: either FR,
FR+, or TSH. Pushes them out the output, and optionally stops the driver when
there are no more packets.
.PP
\fBFromNLANRDump\fR also transparently reads gzip- and bzip2-compressed files, if
you have zcat(1) and bzcat(1) installed.
.PP
Keyword arguments are:
.PP


.IP "FORMAT" 8
String.  Should be either 'fr', 'fr+', 'tsh', or 'guess'.  Default is 'guess'.
.IP "" 8
.IP "STOP" 8
Boolean.  If true, then \fBFromNLANRDump\fR will ask the router to stop when it is
done reading its file (or the END time is reached).  Default is false.
.IP "" 8
.IP "ACTIVE" 8
Boolean. If false, then \fBFromNLANRDump\fR will not emit packets (until the
`\f(CWactive\fR' handler is written). Default is true.
.IP "" 8
.IP "FORCE_IP" 8
Boolean. This argument is ignored; it's here for compatibility with 
.M FromDump 7
and the like. \fBFromNLANRDump\fR behaves as if FORCE_IP was set to true.
.IP "" 8
.IP "START" 8
Absolute time in seconds since the epoch. \fBFromNLANRDump\fR will output packets with
timestamps after that time.
.IP "" 8
.IP "START_AFTER" 8
Argument is relative time in seconds (or supply a suffix like `min', `h').
\fBFromNLANRDump\fR will skip the first \fIT\fR seconds in the log.
.IP "" 8
.IP "END" 8
Absolute time in seconds since the epoch. \fBFromNLANRDump\fR will stop when
encountering a packet with timestamp at or after that time.
.IP "" 8
.IP "END_AFTER" 8
Argument is relative time in seconds (or supply a suffix like `min', `h').
\fBFromNLANRDump\fR will stop at the first packet whose timestamp is at least \fIT\fR
seconds after the first timestamp in the log.
.IP "" 8
.IP "INTERVAL" 8
Argument is relative time in seconds (or supply a suffix like `min', `h').
\fBFromNLANRDump\fR will stop at the first packet whose timestamp is at least \fIT\fR
seconds after the first packet output.
.IP "" 8
.IP "END_CALL" 8
Specify a handler to call once the end time is reached, or the dump runs out
of packets.  This defaults to '\fIFromNLANRDump\fR.active false'.  END_CALL and
STOP are mutually exclusive.
.IP "" 8
.IP "SAMPLE" 8
Unsigned real number between 0 and 1. \fBFromNLANRDump\fR will output each packet with
probability SAMPLE. Default is 1. \fBFromNLANRDump\fR uses fixed-point arithmetic, so
the actual sampling probability may differ substantially from the requested
sampling probability. Use the \f(CWsampling_prob\fR handler to find out the actual
probability.
.IP "" 8
.IP "TIMING" 8
Boolean. If true, then \fBFromNLANRDump\fR tries to maintain the inter-packet timing
of the original packet stream. False by default.
.IP "" 8
.IP "MMAP" 8
Boolean. If true, then \fBFromNLANRDump\fR will use 
.M mmap 2
to access the tcpdump
file. This can result in slightly better performance on some machines.
\fBFromNLANRDump\fR's regular file discipline is pretty optimized, so the difference
is often small in practice. Default is true on most operating systems, but
false on Linux.
.IP "" 8
.IP "FILEPOS" 8
File offset. If supplied, then \fBFromNLANRDump\fR will start emitting packets from
this (uncompressed) file position. This is dangerous; if you get the offset
wrong, \fBFromNLANRDump\fR will emit garbage.
.IP "" 8
.PP
You can supply at most one of START and START_AFTER, and at most one of END,
END_AFTER, and INTERVAL.
.PP
Only available in user-level processes.
.PP
.SH "NOTES"
In TSH dumps, \fBFromNLANRDump\fR sets packets' link annotations to the link number
stored in the dump.
.PP

.SH "ELEMENT HANDLERS"



.IP "\fBsampling_prob\fR (read-only)" 5
Returns the sampling probability (see the SAMPLE keyword argument).
.IP "" 5
.IP "\fBactive\fR (read/write)" 5
Value is a Boolean.
.IP "" 5
.IP "\fBencap\fR (read-only)" 5
Returns "IP".
.IP "" 5
.IP "\fBfilename\fR (read-only)" 5
Returns the filename supplied to \fBFromNLANRDump\fR.
.IP "" 5
.IP "\fBfilesize\fR (read-only)" 5
Returns the length of the \fBFromNLANRDump\fR file, in bytes, or "-" if that length
cannot be determined (because the file was compressed, for example).
.IP "" 5
.IP "\fBfilepos\fR (read-only)" 5
Returns \fBFromNLANRDump\fR's position in the (uncompressed) file, in bytes.
.IP "" 5
.IP "\fBpacket_filepos\fR (read-only)" 5
Returns the (uncompressed) file position of the last packet emitted, in bytes.
This handler is useful for elements like AggregateIPFlows that can record
statistics about portions of a trace; with packet_filepos, they can note
exactly where the relevant portion begins.
.IP "" 5
.IP "\fBextend_interval\fR (write-only)" 5
Text is a time interval. If END_TIME or one of its cousins was specified, then
writing to this handler extends END_TIME by that many seconds. Also, ACTIVE is
set to true.
.IP "" 5
.PP

.SH "SEE ALSO"
.M FromDump 7 ,
.M ToDump 7 ,
.M mmap 2


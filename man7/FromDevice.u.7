.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/userlevel/fromdevice.hh:35'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "FROMDEVICE.U" 7click "12/Oct/2017" "Click"
.SH "NAME"
FromDevice.u \- Click element;
reads packets from network device (user-level)
.SH "SYNOPSIS"
\fBFromDevice\fR(DEVNAME [, \fIkeywords\fR SNIFFER, PROMISC, FORCE_IP, etc.])

\fBPorts\fR: no inputs, 1-2 outputs
.br
\fBProcessing\fR: push
.br
\fBDrivers\fR: userlevel
.br
.SH "DESCRIPTION"
This manual page describes the user-level version of the \fBFromDevice\fR
element. For the Linux kernel module element, read the 
.M FromDevice n
manual
page.
.PP
Reads packets from the kernel that were received on the network controller
named DEVNAME.
.PP
User-level \fBFromDevice\fR behaves like a packet sniffer by default.  Packets
emitted by \fBFromDevice\fR are also received and processed by the kernel.  Thus, it
doesn't usually make sense to run a router with user-level Click, since each
packet will get processed twice (once by Click, once by the kernel).  Install
firewalling rules in your kernel if you want to prevent this, for instance
using the 
.M KernelFilter 7
element or \fBFromDevice\fR's SNIFFER false argument.
.PP
Under Linux, a \fBFromDevice\fR element will not receive packets sent by a
ToDevice element for the same device. Under other operating systems, your
mileage may vary.
.PP
Sets the packet type annotation appropriately. Also sets the timestamp
annotation to the time the kernel reports that the packet was received.
.PP
Keyword arguments are:
.PP


.IP "SNIFFER" 8
Boolean.  Specifies whether \fBFromDevice\fR should run in sniffer mode.  In
non-sniffer mode, \fBFromDevice\fR installs 
.M KernelFilter 7
filtering rules to block
the kernel from handling any packets arriving on device DEVNAME.  Default is
true (sniffer mode).
.IP "" 8
.IP "PROMISC" 8
Boolean.  \fBFromDevice\fR puts the device in promiscuous mode if PROMISC is true.
The default is false.
.IP "" 8
.IP "SNAPLEN" 8
Unsigned.  On some systems, packets larger than SNAPLEN will be truncated.
Defaults to 2046.
.IP "" 8
.IP "FORCE_IP" 8
Boolean. If true, then output only IP packets. (Any link-level header remains,
but the IP header annotation has been set appropriately.) Default is false.
.IP "" 8
.IP "METHOD" 8
Word.  Defines the capture method \fBFromDevice\fR will use to read packets from the
device.  Linux targets generally support PCAP and LINUX; other targets support
only PCAP.  Defaults to PCAP.
.IP "" 8
.IP "BPF_FILTER" 8
String.  A BPF filter expression used to select the interesting packets.
Default is the empty string, which means all packets.  If METHOD is not PCAP,
then any filter expression is ignored with a warning.
.IP "" 8
.IP "ENCAP" 8
Word.  The encapsulation type the interface should use; see 
.M FromDump 7
for
choices.  Ignored if METHOD is not PCAP.
.IP "" 8
.IP "OUTBOUND" 8
Boolean. If true, then emit packets that the kernel sends to the given
interface, as well as packets that the kernel receives from it. Default is
false.
.IP "" 8
.IP "PROTOCOL" 8
Integer. If set and nonzero, then only emit packets with this link-level
protocol. Only affects METHOD LINUX. Default is 0.
.IP "" 8
.IP "HEADROOM" 8
Integer. Amount of bytes of headroom to leave before the packet data. Defaults
to roughly 28.
.IP "" 8
.IP "BURST" 8
Integer. Maximum number of packets to read per scheduling. Defaults to 1.
.IP "" 8
.IP "TIMESTAMP" 8
Boolean. If false, then do not timestamp packets. Defaults to true.
.IP "" 8
.PP

.SH "EXAMPLES"

.nf
\&  FromDevice(eth0) -> ...
.fi
.PP



.SH "NOTES"
\fBFromDevice\fR sets packets' extra length annotations as appropriate.
.PP

.SH "ELEMENT HANDLERS"



.IP "\fBcount\fR (read-only)" 5
Returns the number of packets read by the device.
.IP "" 5
.IP "\fBreset_counts\fR (write-only)" 5
Resets "count" to zero.
.IP "" 5
.IP "\fBkernel_drops\fR (read-only)" 5
Returns the number of packets dropped by the kernel, probably due to memory
constraints, before \fBFromDevice\fR could get them. This may be an integer; the
notation \f(CW"<\fId\fR"\fR, meaning at most \f(CW\fId\fR\fR drops; or \f(CW"??"\fR, meaning the
number of drops is not known.
.IP "" 5
.IP "\fBencap\fR (read-only)" 5
Returns a string indicating the encapsulation type on this link. Can be
`\f(CWIP\fR', `\f(CWETHER\fR', or `\f(CWFDDI\fR', for example.
.IP "" 5
.PP

.SH "SEE ALSO"
.M ToDevice.u 7 ,
.M FromDump 7 ,
.M ToDump 7 ,
.M KernelFilter 7 ,
.M FromDevice n


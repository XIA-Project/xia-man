.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/ip6/addresstranslator.hh:14'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "ADDRESSTRANSLATOR" 7click "12/Oct/2017" "Click"
.SH "NAME"
AddressTranslator \- Click element;
translates IPv6/ICMPv6, TCP, and UDP packets' addresses and ports
.SH "SYNOPSIS"
\fBAddressTranslator\fR(number_of_static_Mapping,
.br
.nf
\& StaticPortMapping,N<>
\& StaticMapping1,...N<>
\& StaticMappingm,N<>
\& DynamicMapping,N<>
\& DynamicPortMapping,N<>
\& AddressAllocationDirection,N<>
\& Mapped_IP6Address Port_start Port_end)
.fi
.PP



\fBPorts\fR: 2 inputs, 2 outputs
.br
\fBProcessing\fR: agnostic
.br
.SH "DESCRIPTION"
Translates IPv6/ICMPv6, TCP, and UDP packets by changing their source address,
source port, destination address, and/or destination port.
.PP
Has one or more inputs and one or more outputs. Input packets must have
their IP6 header annotations set. Output packets are valid IP6 packets; for
instance, translated packets have their checksums updated.
.PP
\fBAddressTranslator\fR maintains a table of mappings for static address and port
mapping and dynamic address mapping.  It contains fields such
as _iai, _ipi, _mai, _mpi, _ea, _ep, _t, _binding, _state, _static.
For static mapping, the addresses (and ports) are mapped when the \fBAddressTranslator\fR
is initiated. For dynamic mapping, mappings are created on the fly as new flows
arrives from the direction that can be allocate new mapped address/port.
.PP
For dynamic address and port configuration, the \fBAddressTranslator\fR maintains two tables
_in_map and _out_map to map flow ID for outward packet and inward packet respectively.
.PP
If the \fBAddressTranslator\fR is configured as static mapping or dynamic address mapping,
when a packet arrives, the \fBAddressTranslator\fR will first check entries in the
address-mapping * table, see if there exists an entry for the flow that the packet
belongs to.  If there's such an entry,then the packet's source address (and port)
will be replaced with the mapped address (and port) of the entry for the outward packet
and the packet's destination address (and port) will be replaced with the inner host's
address (and port) for the inward packet.
.PP
If there is no such an entry and it is configured for dynamic address mapping, then the
translator will create a binding for the new mapping if the flow comes from the right direction (the direction that allocates a new mapping is allowed). Otherwise, the packet is discarded.
.PP
If the \fBAddressTranslator\fR is configured for dynamic address and port mapping,the
\fBAddressTranslator\fR will first check entries in the _in_map or _out_map table, depending on
packet's direction. It checks if the table has an entry whose flowID is the same as the packet.
If there is,  use the mapped flowID of that entry for the packet.  Otherwise, it will try to
find an unsed port and create a mapped flowID for the flow and insert the entry, if the packet
comes from the right direction.
.PP

.SH "SEE ALSO"
.M ProtocolTranslator64 7 ,
.M ProtocolTranslator46 7


.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/linuxmodule/fromhost.hh:9'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "FROMHOST" 7click "12/Oct/2017" "Click"
.SH "NAME"
FromHost \- Click element;
reads packets from Linux
.SH "SYNOPSIS"
\fBFromHost\fR(DEVNAME [, PREFIX, \fIKEYWORDS\fR])

\fBPorts\fR: no inputs, 1-2 outputs
.br
\fBProcessing\fR: push
.br
\fBDrivers\fR: linuxmodule
.br
.SH "DESCRIPTION"
Captures packets orginating from the Linux kernel and pushes them on output 0.
The type of packet depends on the TYPE keyword argument.  For TYPE ETHER,
output packets have Ethernet headers; only the protocol field is interesting.
For TYPE IP, output packets are IP packets.  TYPE ETHER is the default,
although TYPE IP is probably more useful.
.PP
Installs a fake interface called DEVNAME.  If PREFIX is given, changes the
routing table so that every packet destined for PREFIX = ADDR/MASK is sent
through that interface.  The packet then leaves on output 0. The device's
native address is ADDR.
.PP
After the fake device is created, the effect of bringing up the interface
and changing the routing table is analogous to:
.PP
.nf
\&  % /sbin/ifconfig DEVNAME up
\&  % /sbin/route add -net ADDR netmask MASK DEVNAME
.fi
.PP
This element is only available in the Linux kernel module.
.PP
Keyword arguments are:
.PP



.IP "TYPE" 8
Specifies the device type.  Valid options are \f(CWETHER\fR and \f(CWIP\fR.  Currently
defaults to \f(CWETHER\fR with a warning.
.IP "" 8
.IP "PREFIX" 8
Specifies the fake device's IP address and netmask.
.IP "" 8
.IP "ETHER" 8
Ethernet address. Specifies the fake device's Ethernet address. Default is
00-01-02-03-04-05.
.IP "" 8
.IP "MTU" 8
Integer.  The maximum transmission unit reported to Linux for the device.
Defaults to 1500.
.IP "" 8
.IP "CAPACITY" 8
Unsigned.  Maximum length of the internal queue that collects packets from
Linux.  Defaults to 100.  If this queue overflows, packets will be silently
dropped.
.IP "" 8
.IP "CLEAR_ANNO" 8
Boolean.  Sets whether or not to clear the user annotation area on packets
received from Linux.  This consists of the user annotations.
If false, this area is left as it was received from Linux.
(Note that the packet type, device, and header annotations are left as is.)
Defaults to true.
.IP "" 8
.IP "BURST" 8
Integer.  Sets the BURST parameter affecting how many packets are
emitted per task execution.  BURST is 8 by default.
.IP "" 8
.PP

.SH "NOTES"
If TYPE is IP, \fBFromHost\fR will set the packet's IP header and destination IP
address annotations.  Packets with bad IP version or header length are dropped
or emitted on output 1 if it exists.  Note that \fBFromHost\fR doesn't check IP
checksums or full packet lengths.
.PP
If TYPE is ETHER, Linux will send ARP queries to the fake device. You must
respond to these queries in order to receive any IP packets, but you can
obviously respond with any Ethernet address you'd like. Here is one common
idiom:
.PP
.nf
\&  FromHost(fake0, 192.0.0.1/8, TYPE ETHER)
\&    -> fromhost_cl :: Classifier(12/0806, 12/0800);
\&  fromhost_cl[0] -> ARPResponder(0.0.0.0/0 1-1-1-1-1-1) -> ToHost;
\&  fromhost_cl[1] -> ... // IP packets
.fi
.PP



.SH "EXAMPLES"

.nf
\&  FromHost(fake0, 192.0.0.1/8) -> ...;
.fi
.PP



.SH "ELEMENT HANDLERS"



.IP "\fBlength\fR (read-only)" 5
Return the current length of the internal queue.
.IP "" 5
.IP "\fBcapacity\fR (read-only)" 5
Return the maximum length of the internal queue (the CAPACITY argument).
.IP "" 5
.IP "\fBdrops\fR (read-only)" 5
Return the number of packets dropped off the internal queue so far.
.IP "" 5
.PP

.SH "SEE ALSO"
.M ToHost 7 ,
.M FromDevice 7 ,
.M PollDevice 7 ,
.M ToDevice 7


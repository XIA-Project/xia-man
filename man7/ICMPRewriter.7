.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/icmp/icmprewriter.hh:9'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "ICMPREWRITER" 7click "12/Oct/2017" "Click"
.SH "NAME"
ICMPRewriter \- Click element;
rewrites ICMP packets based on IP rewriter mappings
.SH "SYNOPSIS"
\fBICMPRewriter\fR(MAPS, \fIkeywords\fR DST_ANNO)

\fBPorts\fR: 1 input, 1 or more outputs
.br
\fBProcessing\fR: push
.br
.SH "DESCRIPTION"
Rewrites ICMP error packets by changing their source and/or destination
addresses and some of their payloads. It checks MAPS, a space-separated list
of 
.M IPRewriter 7 -like
elements, to see how to rewrite. This lets source quenches,
redirects, TTL-expired messages, and so forth pass through a NAT gateway.
.PP
ICMP error packets are sent in response to normal IP packets, and include a
small portion of the relevant IP packet data. If the IP packet had been sent
through 
.M IPRewriter 7 ,
.M ICMPPingRewriter 7 ,
or a similar element, then the ICMP
packet will be in response to the rewritten address. \fBICMPRewriter\fR takes such
ICMP error packets and checks a list of IPRewriters for a relevant mapping. If
a mapping is found, \fBICMPRewriter\fR will rewrite the ICMP packet so it appears
like a response to the original packet and emit the result on output 0.
.PP
\fBICMPRewriter\fR may have one or two outputs. If it has one, then any
non-rewritten ICMP error packets, and any ICMP packets that are not errors,
are dropped. If it has two, then these kinds of packets are emitted on output
1.
.PP
Keyword arguments are:
.PP


.IP "DST_ANNO" 8
Boolean. If true, then set the destination IP address annotation on passing
packets to the rewritten destination address. Default is true.
.IP "" 8
.PP

.SH "NOTES"
\fBICMPRewriter\fR supports the following ICMP types: destination unreachable, time
exceeded, parameter problem, source quench, and redirect.
.PP
MAPS elements may have element class 
.M IPAddrRewriter 7 ,
.M IPRewriter 7 ,
.M TCPRewriter 7 ,
.M ICMPPingRewriter 7 ,
or other related classes.
.PP

.SH "SEE ALSO"
.M IPAddrRewriter 7 ,
.M IPRewriter 7 ,
.M ICMPPingRewriter 7 ,
.M TCPRewriter 7


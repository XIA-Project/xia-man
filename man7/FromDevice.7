.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/linuxmodule/fromdevice.hh:5'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "FROMDEVICE" 7click "12/Oct/2017" "Click"
.SH "NAME"
FromDevice \- Click element;
reads packets from network device (Linux kernel)
.SH "SYNOPSIS"
\fBFromDevice\fR(DEVNAME [, \fIkeywords\fR PROMISC, BURST, TIMESTAMP...])

\fBPorts\fR: no inputs, 1 output
.br
\fBProcessing\fR: push
.br
\fBDrivers\fR: linuxmodule
.br
.SH "DESCRIPTION"
This manual page describes the Linux kernel module version of the \fBFromDevice\fR
element. For the user-level element, read the 
.M FromDevice.u 7
manual page.
.PP
Intercepts all packets received by the Linux network interface named DEVNAME
and pushes them out output 0.  The packets include the link-level header.
DEVNAME may also be an Ethernet address, in which case \fBFromDevice\fR searches for
a device with that address.
.PP
\fBFromDevice\fR receives packets at interrupt time and stores them in an internal
queue.  Later, in the Click kernel thread -- that is, not at interrupt time --
a \fBFromDevice\fR task emits packets from that queue into the configuration.  It
emits at most BURST packets per task execution; BURST is 8 by default.
.PP
Keyword arguments are:
.PP


.IP "PROMISC" 8
Boolean.  If true, the device is put into promiscuous mode while \fBFromDevice\fR is
active.  Default is false.
.IP "" 8
.IP "BURST" 8
Unsigned integer.  Sets the BURST parameter.
.IP "" 8
.IP "TIMESTAMP" 8
Boolean.  If true, then ensure that received packets have correctly-set
timestamp annotations.  Default is true.
.IP "" 8
.IP "QUIET" 8
Boolean.  If true, then suppress device up/down messages.  Default is false.
.IP "" 8
.IP "ALLOW_NONEXISTENT" 8
Allow nonexistent devices. If true, and no device named DEVNAME exists when
the router is initialized, then \fBFromDevice\fR will report a warning (rather than
an error). Later, while the router is running, if a device named DEVNAME
appears, \fBFromDevice\fR will seamlessly begin outputing its packets. Default is
false.
.IP "" 8
.IP "UP_CALL" 8
Write handler.  If supplied, this handler is called when the device or link
comes up.
.IP "" 8
.IP "DOWN_CALL" 8
Write handler.  If supplied, this handler is called when the device or link
goes down.
.IP "" 8
.IP "ACTIVE" 8
Boolean.  If false, then \fBFromDevice\fR will not accept packets from the attached
device; instead, packets from the device are processed by Linux as usual.
Default is true.
.IP "" 8
.IP "ALIGNMENT" 8
Specifies the alignment of packets emitted by this \fBFromDevice\fR, in the form
"ALIGN OFFSET", such as "4 0".  \fBFromDevice\fR does not process this argument
itself, but the click-align tool parses the argument and uses it in its
calculations.  The default ALIGNMENT is 4 2.
.IP "" 8
.PP

.SH "NOTES"
Linux won't see any packets from the device.  If you want Linux to process
packets, you should hand them to 
.M ToHost 7 .
.PP
\fBFromDevice\fR accesses packets the same way Linux does: through interrupts.
This is bad for performance. If you care about performance and have a
polling-capable device, use 
.M PollDevice 7
instead.
.PP
Linux device drivers should have set packets' timestamp, packet-type, and
device annotations, so packets emitted by \fBFromDevice\fR generally have these
annotations.
.PP

.SS "Patchless Installations"
On patchless installations, \fBFromDevice\fR works by repurposing the hooks used for
Ethernet bridging.  It is not advised to use \fBFromDevice\fR and the Ethernet
bridge module simultaneously.
.PP
On patched installations, \fBFromDevice\fR intercepts packets before they are passed
to packet sniffers like tcpdump.  However, on patchless installations, packet
sniffers receive incoming packets before \fBFromDevice\fR can intercept them.  This
means that in a configuration such as
.PP
.nf
\&  FromDevice(eth0) -> ToHost;
.fi
.PP
packet sniffers will see eth0's packets twice, once before \fBFromDevice\fR runs and
once when the packets are handed back to Linux via 
.M ToHost 7 .
.PP

.SH "ELEMENT HANDLERS"



.IP "\fBactive\fR (read/write)" 5
The write handler sets the ACTIVE parameter.  The read handler returns the
ACTIVE parameter if the device is up, or "false" if the device is down.
.IP "" 5
.IP "\fBcount\fR (read-only)" 5
Returns the number of packets emitted so far.
.IP "" 5
.IP "\fBlength\fR (read-only)" 5
Returns the current length of \fBFromDevice\fR's internal packet queue.
.IP "" 5
.IP "\fBreset_counts\fR (write-only)" 5
Resets the count and drops handlers.
.IP "" 5
.PP

.SH "SEE ALSO"
.M PollDevice 7 ,
.M ToDevice 7 ,
.M FromHost 7 ,
.M ToHost 7 ,
.M FromDevice.u 7


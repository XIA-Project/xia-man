.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/analysis/fromcapdump.hh:11'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "FROMCAPDUMP" 7click "12/Oct/2017" "Click"
.SH "NAME"
FromCapDump \- Click element;
reads packets from a 'cap' output file
.SH "SYNOPSIS"
\fBFromCapDump\fR(FILENAME [, \fIKEYWORDS\fR])

\fBPorts\fR: no inputs, 1 output
.br
\fBProcessing\fR: agnostic
.br
\fBDrivers\fR: userlevel
.br
.SH "DESCRIPTION"
Reads TCP packet descriptors from a file produced by Mark Allman's 'cap' tool
and emits the corresponding TCP packets.  Here's an example 'cap' file:
.PP
.nf
\&   SND 0
\&   INF - cap v2.13
\&   SYN > 1046102982.856142 0 0 40 0
\&   SYN < 1046102982.931832 0 0 40 0
\&   DAT > 1046102982.931941 1 1 1500 1460
\&   ACK < 1046102983.156387 1 1 40 0
\&   DAT > 1046102983.156531 2 2 1500 1460
\&   ...
\&   DAT > 1046102996.137294 5068 5000 1500 1460 FIN
\&   ACK < 1046102996.215164 5068 5000 40 0 FIN
.fi
.PP
\f(CWSYN\fR, \f(CWDAT\fR, and \f(CWACK\fR lines have the following fields: packet type,
direction, timestamp (in seconds past the epoch), unique packet number, packet
sequence number, packet IP length, payload length, and optional flags.
.PP
The file may be compressed with gzip(1) or bzip2(1); \fBFromCapDump\fR will
run zcat(1) or bzcat(1) to uncompress it.
.PP
\fBFromCapDump\fR reads from the file named FILENAME unless FILENAME is a
single dash `\f(CW-\fR', in which case it reads from the standard input. It will
not uncompress the standard input, however.
.PP
Output packets have timestamp, aggregate, paint, and packet number
annotations.  The paint annotation is 0 for data packets and 1 for
acknowledgements.  The first packet number annotation equals the unique packet
number; the second equals the packet sequence number.
.PP
Keyword arguments are:
.PP



.IP "STOP" 8
Boolean. If true, then \fBFromCapDump\fR will ask the router to stop when it
is done reading. Default is false.
.IP "" 8
.IP "ACTIVE" 8
Boolean. If false, then \fBFromCapDump\fR will not emit packets (until the
`\f(CWactive\fR' handler is written). Default is true.
.IP "" 8
.IP "ZERO" 8
Boolean. Determines the contents of packet data not set by the dump. If true
(the default), this data is zero. If false, it is random garbage.
.IP "" 8
.IP "CHECKSUM" 8
Boolean. If true, then output packets' IP, TCP, and UDP checksums are set. If
false (the default), the checksum fields contain random garbage.
.IP "" 8
.IP "SAMPLE" 8
Unsigned real number between 0 and 1. \fBFromCapDump\fR will output each
packet with probability SAMPLE. Default is 1. \fBFromCapDump\fR uses
fixed-point arithmetic, so the actual sampling probability may differ
substantially from the requested sampling probability. Use the
\f(CWsampling_prob\fR handler to find out the actual probability. If MULTIPACKET is
true, then the sampling probability applies separately to the multiple packets
generated per record.
.IP "" 8
.IP "FLOWID" 8
String, containing a space-separated flow ID (source address, source port,
destination address, destination port, and, optionally, protocol). Defines the
IP addresses and ports on output packets.  If no FLOWID is given, \fBFromCapDump\fR
uses \f(CW1.0.0.1 1 2.0.0.2 2\fR.
.IP "" 8
.IP "AGGREGATE" 8
Unsigned integer.  Defines the aggregate annotation for output packets.
Default is 1.
.IP "" 8
.PP
Only available in user-level processes.
.PP
.SH "NOTES"
Packets generated by \fBFromCapDump\fR always have IP version 4 and a correct
IP header length. The rest of the packet data is zero or garbage, unless set
by the dump. Generated packets will usually have short lengths, but the extra
header length annotations are set correctly.
.PP
\fBFromCapDump\fR is a notifier signal, active when the element is active and
the dump contains more packets.
.PP

.SH "ELEMENT HANDLERS"



.IP "\fBsampling_prob\fR (read-only)" 5
Returns the sampling probability (see the SAMPLE keyword argument).
.IP "" 5
.IP "\fBactive\fR (read/write)" 5
Value is a Boolean.
.IP "" 5
.IP "\fBencap\fR (read-only)" 5
Returns 'IP'. Useful for ToDump's USE_ENCAP_FROM option.
.IP "" 5
.IP "\fBfilesize\fR (read-only)" 5
Returns the length of the \fBFromCapDump\fR file, in bytes, or "-" if that
length cannot be determined.
.IP "" 5
.IP "\fBfilepos\fR (read-only)" 5
Returns \fBFromCapDump\fR's position in the file, in bytes.
.IP "" 5
.IP "\fBstop\fR (write-only)" 5
When written, sets `active' to false and stops the driver.
.IP "" 5
.PP

.SH "SEE ALSO"
.M FromIPSummaryDump 7 ,
.M ToIPSummaryDump 7
.PP
Mark Allman, "Measuring End-to-End Bulk Transfer Capacity", Proc. Internet
Measurement Workshop 2001.


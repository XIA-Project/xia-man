.\" -*- mode: nroff -*-
.\" Generated by 'click-elem2man' from '../elements/userlevel/todump.hh:11'
.de M
.IR "\\$1" "(\\$2)\\$3"
..
.de RM
.RI "\\$1" "\\$2" "(\\$3)\\$4"
..
.TH "TODUMP" 7click "12/Oct/2017" "Click"
.SH "NAME"
ToDump \- Click element;
writes packets to a tcpdump file
.SH "SYNOPSIS"
\fBToDump\fR(FILENAME [, \fIkeywords\fR SNAPLEN, ENCAP, USE_ENCAP_FROM, EXTRA_LENGTH, NANO])

\fBPorts\fR: 1 input, at most 1 output
.br
\fBProcessing\fR: agnostic
.br
\fBDrivers\fR: userlevel, ns
.br
.SH "DESCRIPTION"
Writes incoming packets to FILENAME in `tcpdump -w' format. This file can be
read by `tcpdump -r', or by 
.M FromDump 7
on a later run. FILENAME can be `-', in
which case \fBToDump\fR writes to the standard output.
.PP
Writes at most SNAPLEN bytes of each packet to the file. The default SNAPLEN
is 2000. If SNAPLEN is 0, the whole packet will be written to the file.  ENCAP
specifies the first header each packet is expected to have.  This information
is stored in the file header, and must be correct or tcpdump won't be able to
read the file correctly. It can be \f(CWETHER\fR (Ethernet encapsulation),
\f(CWIP\fR (raw IP packets), \f(CWFDDI\fR, \f(CWATM\fR, \f(CW802_11\fR, \f(CWSLL\fR, \f(CWAIRONET\fR, \f(CWHDLC\fR,
\f(CWPPP_HDLC\fR, \f(CWPPP\fR, \f(CWSUNATM\fR, \f(CWPRISM\fR, or \f(CWNULL\fR; the default is \f(CWETHER\fR.
.PP
\fBToDump\fR may have zero or one output. If it has an output, then it emits all
received packets on that output. \fBToDump\fR will schedule itself on the task list
if it is used as a pull element with no outputs.
.PP
Keyword arguments are:
.PP


.IP "SNAPLEN" 8
Integer.  See above.
.IP "" 8
.IP "ENCAP" 8
The encapsulation type to store in the dump.  See above.
.IP "" 8
.IP "USE_ENCAP_FROM" 8
Argument is a space-separated list of element names. At initialization time,
\fBToDump\fR will check these elements' `encap' handlers, and parse them as ENCAP
arguments. If all the handlers agree, \fBToDump\fR will use that encapsulation type;
otherwise, it will report an error. You can specify at most one of ENCAP and
USE_ENCAP_FROM. 
.M FromDump 7
and 
.M FromDevice.u 7
have `encap' handlers.
.IP "" 8
.IP "EXTRA_LENGTH" 8
Boolean. Set to true if you want \fBToDump\fR to store any extra length as recorded
in packets' extra length annotations. Default is true.
.IP "" 8
.IP "UNBUFFERED" 8
Boolean. Set to true if you want \fBToDump\fR to use unbuffered IO when saving data to
a file.  This is unlikely to work with compressed dump formats. Default is
false.
.IP "" 8
.IP "NANO" 8
Boolean. Set to true to write nanosecond-precision timestamps. Default depends
on the version of tcpdump/pcap on the machine.
.IP "" 8
.PP
This element is only available at user level.
.PP
.SH "NOTES"
\fBToDump\fR stores packets' true length annotations when available.
.PP

.SH "ELEMENT HANDLERS"



.IP "\fBcount\fR (read-only)" 5
Returns the number of packets emitted so far.
.IP "" 5
.IP "\fBreset_counts\fR (write-only)" 5
Resets "count" to 0.
.IP "" 5
.IP "\fBfilename\fR (read-only)" 5
Returns the filename.
.IP "" 5
.PP

.SH "SEE ALSO"
.M FromDump 7 ,
.M FromDevice.u 7 ,
.M ToDevice.u 7 ,
.M tcpdump 1

